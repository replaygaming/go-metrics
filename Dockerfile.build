FROM alpine:3.4

# Installing go from OS package manager to make sure all the
# dependencies are taken care of by the OS package manager.
RUN apk add -U --no-cache go git

ENV GOPATH /go

RUN go get github.com/replaygaming/go-metrics

ENV SRCROOT /go/src/github.com/replaygaming/go-metrics

WORKDIR ${SRCROOT}

ADD *.go ${SRCROOT}
ADD internal ${SRCROOT}

RUN go get \
      && go build
